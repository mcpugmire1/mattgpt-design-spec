<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: RAG_Architecture Pages: 1 -->
<svg width="1417pt" height="297pt"
 viewBox="0.00 0.00 1417.00 297.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 293)">
<title>RAG_Architecture</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-293 1413,-293 1413,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_user</title>
<path fill="none" stroke="#e5e7eb" d="M20,-105C20,-105 105,-105 105,-105 111,-105 117,-111 117,-117 117,-117 117,-166 117,-166 117,-172 111,-178 105,-178 105,-178 20,-178 20,-178 14,-178 8,-172 8,-166 8,-166 8,-117 8,-117 8,-111 14,-105 20,-105"/>
<text text-anchor="middle" x="62.5" y="-164.4" font-family="Times,serif" font-size="12.00" fill="#374151">User</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_proc</title>
<path fill="none" stroke="#e5e7eb" d="M163,-105C163,-105 412,-105 412,-105 418,-105 424,-111 424,-117 424,-117 424,-166 424,-166 424,-172 418,-178 412,-178 412,-178 163,-178 163,-178 157,-178 151,-172 151,-166 151,-166 151,-117 151,-117 151,-111 157,-105 163,-105"/>
<text text-anchor="middle" x="287.5" y="-164.4" font-family="Times,serif" font-size="12.00" fill="#374151">Processing</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_retrieve</title>
<path fill="none" stroke="#e5e7eb" d="M470,-97C470,-97 726,-97 726,-97 732,-97 738,-103 738,-109 738,-109 738,-269 738,-269 738,-275 732,-281 726,-281 726,-281 470,-281 470,-281 464,-281 458,-275 458,-269 458,-269 458,-109 458,-109 458,-103 464,-97 470,-97"/>
<text text-anchor="middle" x="598" y="-267.4" font-family="Times,serif" font-size="12.00" fill="#374151">Systems • Retrieval</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_score</title>
<path fill="none" stroke="#e5e7eb" d="M600,-8C600,-8 876,-8 876,-8 882,-8 888,-14 888,-20 888,-20 888,-77 888,-77 888,-83 882,-89 876,-89 876,-89 600,-89 600,-89 594,-89 588,-83 588,-77 588,-77 588,-20 588,-20 588,-14 594,-8 600,-8"/>
<text text-anchor="middle" x="738" y="-75.4" font-family="Times,serif" font-size="12.00" fill="#374151">Scoring / Rerank</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_llm</title>
<path fill="none" stroke="#e5e7eb" d="M934,-12C934,-12 1260,-12 1260,-12 1266,-12 1272,-18 1272,-24 1272,-24 1272,-73 1272,-73 1272,-79 1266,-85 1260,-85 1260,-85 934,-85 934,-85 928,-85 922,-79 922,-73 922,-73 922,-24 922,-24 922,-18 928,-12 934,-12"/>
<text text-anchor="middle" x="1097" y="-71.4" font-family="Times,serif" font-size="12.00" fill="#374151">Synthesis (LLM)</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_output</title>
<path fill="none" stroke="#e5e7eb" d="M1318,-12C1318,-12 1389,-12 1389,-12 1395,-12 1401,-18 1401,-24 1401,-24 1401,-73 1401,-73 1401,-79 1395,-85 1389,-85 1389,-85 1318,-85 1318,-85 1312,-85 1306,-79 1306,-73 1306,-73 1306,-24 1306,-24 1306,-18 1312,-12 1318,-12"/>
<text text-anchor="middle" x="1353.5" y="-71.4" font-family="Times,serif" font-size="12.00" fill="#374151">Response</text>
</g>
<!-- user_query -->
<g id="node1" class="node">
<title>user_query</title>
<path fill="#4a90e2" stroke="black" d="M97,-149C97,-149 28,-149 28,-149 22,-149 16,-143 16,-137 16,-137 16,-125 16,-125 16,-119 22,-113 28,-113 28,-113 97,-113 97,-113 103,-113 109,-119 109,-125 109,-125 109,-137 109,-137 109,-143 103,-149 97,-149"/>
<text text-anchor="middle" x="62.5" y="-134.2" font-family="Arial" font-size="11.00" fill="white">Query</text>
<text text-anchor="middle" x="62.5" y="-122.2" font-family="Arial" font-size="11.00" fill="white">(User Question)</text>
</g>
<!-- normalize -->
<g id="node2" class="node">
<title>normalize</title>
<path fill="#2d2d2d" stroke="black" d="M248,-149C248,-149 171,-149 171,-149 165,-149 159,-143 159,-137 159,-137 159,-125 159,-125 159,-119 165,-113 171,-113 171,-113 248,-113 248,-113 254,-113 260,-119 260,-125 260,-125 260,-137 260,-137 260,-143 254,-149 248,-149"/>
<text text-anchor="middle" x="209.5" y="-134.2" font-family="Arial" font-size="11.00" fill="white">Normalize</text>
<text text-anchor="middle" x="209.5" y="-122.2" font-family="Arial" font-size="11.00" fill="white">(clean, detect PII)</text>
</g>
<!-- user_query&#45;&gt;normalize -->
<g id="edge6" class="edge">
<title>user_query&#45;&gt;normalize</title>
<path fill="none" stroke="#9ca3af" d="M109.38,-131C121.82,-131 135.47,-131 148.56,-131"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="148.9,-134.5 158.9,-131 148.9,-127.5 148.9,-134.5"/>
</g>
<!-- embed -->
<g id="node3" class="node">
<title>embed</title>
<path fill="#2d2d2d" stroke="black" d="M404,-149C404,-149 322,-149 322,-149 316,-149 310,-143 310,-137 310,-137 310,-125 310,-125 310,-119 316,-113 322,-113 322,-113 404,-113 404,-113 410,-113 416,-119 416,-125 416,-125 416,-137 416,-137 416,-143 410,-149 404,-149"/>
<text text-anchor="middle" x="363" y="-128.2" font-family="Arial" font-size="11.00" fill="white">Embed + Tokenize</text>
</g>
<!-- normalize&#45;&gt;embed -->
<g id="edge1" class="edge">
<title>normalize&#45;&gt;embed</title>
<path fill="none" stroke="#9ca3af" d="M260.11,-131C272.83,-131 286.67,-131 299.94,-131"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="299.94,-134.5 309.94,-131 299.94,-127.5 299.94,-134.5"/>
</g>
<!-- retriever -->
<g id="node4" class="node">
<title>retriever</title>
<path fill="#7c3aed" stroke="black" d="M534,-149C534,-149 478,-149 478,-149 472,-149 466,-143 466,-137 466,-137 466,-125 466,-125 466,-119 472,-113 478,-113 478,-113 534,-113 534,-113 540,-113 546,-119 546,-125 546,-125 546,-137 546,-137 546,-143 540,-149 534,-149"/>
<text text-anchor="middle" x="506" y="-134.2" font-family="Arial" font-size="11.00" fill="white">Retriever</text>
<text text-anchor="middle" x="506" y="-122.2" font-family="Arial" font-size="11.00" fill="white">(top‑k; filters)</text>
</g>
<!-- embed&#45;&gt;retriever -->
<g id="edge7" class="edge">
<title>embed&#45;&gt;retriever</title>
<path fill="none" stroke="#9ca3af" d="M416.1,-131C429.1,-131 443,-131 455.85,-131"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="455.89,-134.5 465.89,-131 455.89,-127.5 455.89,-134.5"/>
</g>
<!-- pinecone -->
<g id="node5" class="node">
<title>pinecone</title>
<path fill="#7c3aed" stroke="black" d="M715,-152.48C715,-155.11 694.38,-157.25 669,-157.25 643.62,-157.25 623,-155.11 623,-152.48 623,-152.48 623,-109.52 623,-109.52 623,-106.89 643.62,-104.75 669,-104.75 694.38,-104.75 715,-106.89 715,-109.52 715,-109.52 715,-152.48 715,-152.48"/>
<path fill="none" stroke="black" d="M715,-152.48C715,-149.84 694.38,-147.7 669,-147.7 643.62,-147.7 623,-149.84 623,-152.48"/>
<text text-anchor="middle" x="669" y="-134.8" font-family="Times,serif" font-size="14.00" fill="white">Vector DB</text>
<text text-anchor="middle" x="669" y="-119.8" font-family="Times,serif" font-size="14.00" fill="white">(Pinecone)</text>
</g>
<!-- retriever&#45;&gt;pinecone -->
<g id="edge2" class="edge">
<title>retriever&#45;&gt;pinecone</title>
<path fill="none" stroke="#c4b5fd" d="M556.46,-131C574.21,-131 594.34,-131 612.57,-131"/>
<polygon fill="#c4b5fd" stroke="#c4b5fd" points="556.39,-127.5 546.39,-131 556.38,-134.5 556.39,-127.5"/>
<polygon fill="#c4b5fd" stroke="#c4b5fd" points="612.76,-134.5 622.76,-131 612.76,-127.5 612.76,-134.5"/>
</g>
<!-- local -->
<g id="node6" class="node">
<title>local</title>
<path fill="#7c3aed" stroke="black" d="M730,-247.48C730,-250.11 702.66,-252.25 669,-252.25 635.34,-252.25 608,-250.11 608,-247.48 608,-247.48 608,-204.52 608,-204.52 608,-201.89 635.34,-199.75 669,-199.75 702.66,-199.75 730,-201.89 730,-204.52 730,-204.52 730,-247.48 730,-247.48"/>
<path fill="none" stroke="black" d="M730,-247.48C730,-244.84 702.66,-242.7 669,-242.7 635.34,-242.7 608,-244.84 608,-247.48"/>
<text text-anchor="middle" x="669" y="-229.8" font-family="Times,serif" font-size="14.00" fill="white">Local Index</text>
<text text-anchor="middle" x="669" y="-214.8" font-family="Times,serif" font-size="14.00" fill="white">(FAISS/SQLite)</text>
</g>
<!-- retriever&#45;&gt;local -->
<g id="edge3" class="edge">
<title>retriever&#45;&gt;local</title>
<path fill="none" stroke="#c4b5fd" d="M546.37,-154.33C566.99,-166.55 588,-179 588,-179 588,-179 600.72,-186.48 616.02,-195.46"/>
<polygon fill="#c4b5fd" stroke="#c4b5fd" points="548.01,-151.23 537.62,-149.15 544.44,-157.26 548.01,-151.23"/>
<polygon fill="#c4b5fd" stroke="#c4b5fd" points="614.33,-198.53 624.72,-200.57 617.87,-192.49 614.33,-198.53"/>
</g>
<!-- blend -->
<g id="node7" class="node">
<title>blend</title>
<path fill="#d97706" stroke="black" d="M730,-60C730,-60 608,-60 608,-60 602,-60 596,-54 596,-48 596,-48 596,-28 596,-28 596,-22 602,-16 608,-16 608,-16 730,-16 730,-16 736,-16 742,-22 742,-28 742,-28 742,-48 742,-48 742,-54 736,-60 730,-60"/>
<text text-anchor="middle" x="669" y="-47.2" font-family="Arial" font-size="11.00" fill="white">Score</text>
<text text-anchor="middle" x="669" y="-35.2" font-family="Arial" font-size="11.00" fill="white">60/40 Blend</text>
<text text-anchor="middle" x="669" y="-23.2" font-family="Arial" font-size="11.00" fill="white">(semantic • lexical/recency)</text>
</g>
<!-- retriever&#45;&gt;blend -->
<g id="edge8" class="edge">
<title>retriever&#45;&gt;blend</title>
<path fill="none" stroke="#9ca3af" d="M538.42,-112.85C561.94,-99.27 594.49,-80.46 621.08,-65.1"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="622.94,-68.07 629.85,-60.04 619.44,-62.01 622.94,-68.07"/>
</g>
<!-- rerank -->
<g id="node8" class="node">
<title>rerank</title>
<path fill="#f59e0b" stroke="black" d="M868,-56C868,-56 804,-56 804,-56 798,-56 792,-50 792,-44 792,-44 792,-32 792,-32 792,-26 798,-20 804,-20 804,-20 868,-20 868,-20 874,-20 880,-26 880,-32 880,-32 880,-44 880,-44 880,-50 874,-56 868,-56"/>
<text text-anchor="middle" x="836" y="-41.2" font-family="Arial" font-size="11.00" fill="white">Cross‑encoder</text>
<text text-anchor="middle" x="836" y="-29.2" font-family="Arial" font-size="11.00" fill="white">(optional)</text>
</g>
<!-- blend&#45;&gt;rerank -->
<g id="edge4" class="edge">
<title>blend&#45;&gt;rerank</title>
<path fill="none" stroke="#fbbf24" d="M742.37,-38C755.5,-38 768.97,-38 781.43,-38"/>
<polygon fill="#fbbf24" stroke="#fbbf24" points="781.63,-41.5 791.63,-38 781.63,-34.5 781.63,-41.5"/>
</g>
<!-- synth -->
<g id="node9" class="node">
<title>synth</title>
<path fill="#2d2d2d" stroke="black" d="M1085,-56C1085,-56 942,-56 942,-56 936,-56 930,-50 930,-44 930,-44 930,-32 930,-32 930,-26 936,-20 942,-20 942,-20 1085,-20 1085,-20 1091,-20 1097,-26 1097,-32 1097,-32 1097,-44 1097,-44 1097,-50 1091,-56 1085,-56"/>
<text text-anchor="middle" x="1013.5" y="-41.2" font-family="Arial" font-size="11.00" fill="white">Synthesize</text>
<text text-anchor="middle" x="1013.5" y="-29.2" font-family="Arial" font-size="11.00" fill="white">Extractive • Abstractive • Hybrid</text>
</g>
<!-- rerank&#45;&gt;synth -->
<g id="edge9" class="edge">
<title>rerank&#45;&gt;synth</title>
<path fill="none" stroke="#9ca3af" d="M880.38,-38C892.47,-38 906.08,-38 919.86,-38"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="919.9,-41.5 929.9,-38 919.9,-34.5 919.9,-41.5"/>
</g>
<!-- guard -->
<g id="node10" class="node">
<title>guard</title>
<path fill="#374151" stroke="black" d="M1252,-56C1252,-56 1159,-56 1159,-56 1153,-56 1147,-50 1147,-44 1147,-44 1147,-32 1147,-32 1147,-26 1153,-20 1159,-20 1159,-20 1252,-20 1252,-20 1258,-20 1264,-26 1264,-32 1264,-32 1264,-44 1264,-44 1264,-50 1258,-56 1252,-56"/>
<text text-anchor="middle" x="1205.5" y="-41.2" font-family="Arial" font-size="11.00" fill="white">Citations • Safety</text>
<text text-anchor="middle" x="1205.5" y="-29.2" font-family="Arial" font-size="11.00" fill="white">No‑answer threshold</text>
</g>
<!-- synth&#45;&gt;guard -->
<g id="edge5" class="edge">
<title>synth&#45;&gt;guard</title>
<path fill="none" stroke="#9ca3af" d="M1097.01,-38C1110.28,-38 1123.89,-38 1136.77,-38"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="1136.92,-41.5 1146.92,-38 1136.92,-34.5 1136.92,-41.5"/>
</g>
<!-- resp -->
<g id="node11" class="node">
<title>resp</title>
<path fill="#059669" stroke="black" d="M1381,-56C1381,-56 1326,-56 1326,-56 1320,-56 1314,-50 1314,-44 1314,-44 1314,-32 1314,-32 1314,-26 1320,-20 1326,-20 1326,-20 1381,-20 1381,-20 1387,-20 1393,-26 1393,-32 1393,-32 1393,-44 1393,-44 1393,-50 1387,-56 1381,-56"/>
<text text-anchor="middle" x="1353.5" y="-41.2" font-family="Arial" font-size="11.00" fill="white">Final Answer</text>
<text text-anchor="middle" x="1353.5" y="-29.2" font-family="Arial" font-size="11.00" fill="white">+ Sources</text>
</g>
<!-- guard&#45;&gt;resp -->
<g id="edge10" class="edge">
<title>guard&#45;&gt;resp</title>
<path fill="none" stroke="#9ca3af" d="M1264.2,-38C1277.16,-38 1290.78,-38 1303.35,-38"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="1303.61,-41.5 1313.61,-38 1303.61,-34.5 1303.61,-41.5"/>
</g>
</g>
</svg>
